"use strict";var _loaderUtils=require("loader-utils"),_parser=require("./parser"),_utils=require("./utils"),_slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,i=!1,a=void 0;try{for(var o,l=r[Symbol.iterator]();!(n=(o=l.next()).done)&&(t.push(o.value),!e||r.length!==e);n=!0);}catch(r){i=!0,a=r}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};module.exports=function(o,l){this.cacheable&&this.cacheable();var a=this.async(),r=_loaderUtils.parseQuery(this.query),u=r.type,s=r.resourcePath,c=r.index,h=this;null!=c&&c.match(/^\d+$/)&&(c=parseInt(c)),_parser.extractBlocks(o,u).then(function(r){null!=c&&(r=r[c]);var e=r.content.trim(),t=void 0;if(h.sourceMap&&("scripts"===u||"imports"===u)){var i=r.location.line,a=void 0;l&&(a=_utils.consumeMap(h,o,l),o=a.sourcesContent.join(""));var n=_utils.splitSourceLine(e).map(function(r,e){0;var t=(e+=1)+i,n=e;return a&&(t=a.mapping["line-"+t+"-column-0"].line),{original:{line:t,column:0},generated:{line:n,column:0}}});t=_utils.generateMap(h,o,n)}return[e,t,{resourcePath:s}]}).then(function(r){var e=_slicedToArray(r,3),t=e[0],n=e[1],i=e[2];a(null,t,n&&n.toJSON()||l,i)}).catch(function(r){_utils.logWarn(h,[{reason:"ERROR: An error occurred when parsing the ux file: "+r}]),a(null,"{}")})};