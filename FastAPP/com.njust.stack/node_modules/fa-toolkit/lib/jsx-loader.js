"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _pluginSyntaxJsx=_interopRequireDefault(require("@babel/plugin-syntax-jsx"));module.exports=function(e){var o=e.types;return{inherits:_pluginSyntaxJsx.default,visitor:{JSXNamespacedName:function(e){throw e.buildCodeFrameError("A tag/attribute with a namespace is not supported.")},JSXElement:{exit:function(e,i){var n=function(e,i){e.parent.children=o.react.buildChildren(e.parent);var n=s(e.node.name),t=[],r=void 0;o.isIdentifier(n)?(r=n.name,t.push(o.stringLiteral(r))):t.push(n);var a=e.node.attributes;a=a.length?function(e,i){var n=[],t=[],r=!1;function a(){n.length&&(t.push(o.objectExpression(n)),n=[])}for(;e.length;){var s=e.shift();o.isJSXSpreadAttribute(s)?(a(),r=!0,t.push(s.argument)):n.push(l(s))}a(),e=r?(t.unshift(o.objectExpression([])),o.callExpression(o.identifier("__extend"),t)):t[0];return e}(a):o.nullLiteral();return t.push(a),o.callExpression(o.identifier("__elem"),t)}(e.get("openingElement")),t=s(e.get("openingElement").node.name),r=void 0;o.isIdentifier(t)&&(r=t.name);var a=e.node.children.map(function(e){return o.isStringLiteral(e)?function(e,i,n){var t=[];return t.push(o.stringLiteral(e)),t.push(o.objectExpression([o.objectProperty(o.identifier("value"),o.callExpression(o.identifier("__s"),[o.stringLiteral(i)]))])),o.callExpression(o.identifier("__elem"),t)}("text"===r?"span":"text",e.value):e});n.arguments.push(o.arrayExpression(a)),e.replaceWith(o.inherits(n,e.node))}},Program:function(e){e.traverse({"ObjectMethod|FunctionExpression|ClassMethod":function(e){var i={hasJsx:!1};e.traverse({JSXElement:function(){this.hasJsx=!0}},i),i.hasJsx&&(e.get("body").unshiftContainer("body",o.variableDeclaration("const",[o.variableDeclarator(o.identifier("__s"),o.memberExpression(o.thisExpression(),o.identifier("$stringify")))])),e.get("body").unshiftContainer("body",o.variableDeclaration("const",[o.variableDeclarator(o.identifier("__extend"),o.memberExpression(o.thisExpression(),o.identifier("$extend")))])),e.get("body").unshiftContainer("body",o.variableDeclaration("const",[o.variableDeclarator(o.identifier("__elem"),o.memberExpression(o.thisExpression(),o.identifier("$createElement")))])))}})}}};function s(e){return o.isJSXIdentifier(e)&&(e.type="Identifier"),e}function l(e){var i=function(e){return o.isJSXExpressionContainer(e)?e.expression:e}(e.value||o.booleanLiteral(!0));return o.isStringLiteral(i)&&!o.isJSXExpressionContainer(e.value)&&(i.value=i.value.replace(/\n\s+/g," ")),o.isValidIdentifier(e.name.name)?e.name.type="Identifier":e.name=o.stringLiteral(e.name.name),o.inherits(o.objectProperty(e.name,i),e)}};