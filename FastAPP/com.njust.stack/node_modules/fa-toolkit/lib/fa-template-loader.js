"use strict";var _utils=require("./utils"),_parser=require("./parser");module.exports=function(e){var r=this;this.cacheable&&this.cacheable();var t=this.resourcePath,i=this.async(),s=this.options.versionNum,a=this.options.widgetsPathList;_parser.parseTemplate({code:e,filePath:t,versionNum:s,widgetsPathList:a}).then(function(e){var t=e.parsed,s=e.log;s&&s.length&&_utils.logWarn(r,s),i(null,t)}).catch(function(e){_utils.logWarn(r,[{reason:"ERROR: Template parsing error: "+e}]),i(null,"{}")})};